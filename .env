# ITDel Chatbot Environment Configuration
# This file contains environment variables that match the docker-compose setup

# ============================================================================
# SECURITY SETTINGS - CHANGE THESE IN PRODUCTION!
# ============================================================================

# JWT Secret Key (minimum 32 characters)
JWT_SECRET_KEY=itdel_super_secure_jwt_secret_key_minimum_32_characters_long_change_this_in_production

# Database Credentials
POSTGRES_USER=myuser
POSTGRES_PASSWORD=mysecretpassword
POSTGRES_DB=chatbot

# Super Admin Credentials
SUPER_ADMIN_USERNAME=superadmin
SUPER_ADMIN_PASSWORD=superadministrator#
SUPER_ADMIN_EMAIL=admin@itdel.ac.id
SUPER_ADMIN_FULL_NAME=ITDel System Administrator

# MinIO Credentials
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin

# ============================================================================
# SERVICE PORTS
# ============================================================================

# External ports (host machine)
DOCS_PORT=33333
POSTGRES_PORT=35432
API_PORT=35430
UI_PORT=33332
MILVUS_PORT=33530
MILVUS_ADMIN_PORT=34091
ATTU_GUI_PORT=33991
MINIO_API_PORT=34000
MINIO_CONSOLE_PORT=34001
ETCD_PORT=34379
VLLM_PORT=33315
INFINITY_EMBED_PORT=33325

# ============================================================================
# CONTAINER CONFIGURATION
# ============================================================================

# Container Names
DOCS_CONTAINER_NAME=docs-itdel-chatbot
POSTGRES_CONTAINER_NAME=itdel-postgres
ETCD_CONTAINER_NAME=milvus-gpu-etcd
MINIO_CONTAINER_NAME=milvus-gpu-minio
MILVUS_CONTAINER_NAME=milvus-gpu-standalone
ATTU_GUI_CONTAINER_NAME=milvus-gpu-attu-gui
VLLM_CONTAINER_NAME=vllm-qwen3-32b
INFINITY_CONTAINER_NAME=infinity-stella-embed
API_CONTAINER_NAME=itdel-chatbot-api
UI_CONTAINER_NAME=itdel-chatbot-ui

# ============================================================================
# DOCKER IMAGES
# ============================================================================

DOCS_IMAGE=ghcr.io/epsindo-ai/nginx-docs:rag-v1-itdel
POSTGRES_IMAGE=postgres:16.4
ETCD_IMAGE=quay.io/coreos/etcd:v3.5.18
MINIO_IMAGE=minio/minio:RELEASE.2023-03-20T20-16-18Z
MILVUS_IMAGE=milvusdb/milvus:v2.6.0-rc1
ATTU_GUI_IMAGE=zilliz/attu:v2.5.12
VLLM_IMAGE=vllm/vllm-openai:v0.9.1
INFINITY_IMAGE=michaelf34/infinity:0.0.76
API_IMAGE=ghcr.io/epsindo-ai/chatbot-api-production:v1.0.1
UI_IMAGE=ghcr.io/epsindo-ai/itdel-chatbot-ui:v1.0.1.post1

# ============================================================================
# GPU CONFIGURATION
# ============================================================================

# VLLM GPU Device IDs (update based on your system)
VLLM_GPU_DEVICE_IDS=["GPU-3b0e4ba0-0272-5225-02ea-178c6e85fe73"]

# Infinity Embeddings GPU Device (update based on your system)
INFINITY_GPU_DEVICE_IDS=["GPU-650e64d7-574a-62a7-b683-2a1644a46146"]

# API GPU Device (update based on your system)
API_GPU_DEVICE_IDS=["GPU-650e64d7-574a-62a7-b683-2a1644a46146"]

# ============================================================================
# MODEL PATHS (update based on your system)
# ============================================================================

# VLLM Model Path
VLLM_MODEL_PATH=/raid/model_llm/Qwen3-32B

# Infinity Embeddings Model Path
INFINITY_MODEL_PATH=/raid/model_llm/stella_en_1.5B_v5

# ============================================================================
# APPLICATION CONFIGURATION - API SERVICE
# ============================================================================

# App Settings
APP_NAME=ITDel Chatbot API

# JWT Settings
SECRET_KEY=itdel_super_secure_jwt_secret_key_minimum_32_characters_long_change_this_in_production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=2400

# Database Settings (Internal)
POSTGRES_HOST=postgres
POSTGRES_PORT_INTERNAL=5432

# LLM Settings
OPENAI_API_KEY=EMPTY
OPENAI_API_BASE=http://vllm:8000/v1
LLM_MODEL=itdel/qwen3-32b
LLM_MAX_TOKENS=2000
LLM_TEMPERATURE=0.1
LLM_TOP_P=0.95
LLM_CONFIG_NAME=Production LLM Configuration

# MinIO Settings (Internal)
MINIO_ENDPOINT=minio:9000
MINIO_DEFAULT_BUCKET=documents
MINIO_SECURE=false

# RAG Settings
REMOTE_EMBEDDER_URL=http://infinity-embed:33325/embeddings
MILVUS_URI=http://milvus:19530
RETRIEVER_TOP_K=10

# Infinity Embeddings Settings
INFINITY_EMBEDDINGS_MODEL=stella-en-1.5B
INFINITY_API_URL=http://infinity-embed:33325

# ============================================================================
# FRONTEND CONFIGURATION
# ============================================================================

# Backend API URL (Internal)
API_BASE_URL=http://api:35430

# Production settings
NODE_ENV=production
NEXT_TELEMETRY_DISABLED=1

# Container settings
FRONTEND_PORT=3000
HOSTNAME=0.0.0.0

# ============================================================================
# MILVUS CONFIGURATION
# ============================================================================

# Milvus Environment
ETCD_ENDPOINTS=etcd:2379
MINIO_ADDRESS=minio:9000
MQ_TYPE=woodpecker

# Milvus URL for Attu GUI
MILVUS_URL=milvus:19530

# ============================================================================
# ETCD CONFIGURATION
# ============================================================================

ETCD_AUTO_COMPACTION_MODE=revision
ETCD_AUTO_COMPACTION_RETENTION=1000
ETCD_QUOTA_BACKEND_BYTES=4294967296
ETCD_SNAPSHOT_COUNT=50000

# ============================================================================
# VLLM CONFIGURATION
# ============================================================================

VLLM_MODEL_MOUNT_PATH=/qwen3-32b
VLLM_SERVED_MODEL_NAME=itdel/qwen3-32b
VLLM_GPU_MEMORY_UTILIZATION=0.9
VLLM_SHM_SIZE=16G

# ============================================================================
# INFINITY CONFIGURATION
# ============================================================================

INFINITY_MODEL_MOUNT_PATH=/models
INFINITY_SERVED_MODEL_NAME=stella-en-1.5B

# ============================================================================
# VOLUMES
# ============================================================================

POSTGRES_DATA_VOLUME=itdel-chatbot-data
MILVUS_STACK_DATA_VOLUME=itdel-milvus-stack-data
API_LOGS_VOLUME=itdel-api-logs

# ============================================================================
# NETWORK
# ============================================================================

NETWORK_NAME=itdel-network
